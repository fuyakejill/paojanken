<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ã˜ã‚ƒã‚“ã‘ã‚“ãƒ‘ã‚ª</title>
  <style>
    body {
      text-align: center;
      font-family: sans-serif;
      margin-top: 50px;
    }

    .hidden { display: none; }
    .faded { opacity: 0.3; }
    .disabled { pointer-events: none; }

    img {
      width: 250px;
      height: 200px;
      margin-top: 20px;
    }

    #resultImage {
      margin-bottom: 60px;
    }

    button {
      font-size: 24px;
      margin: 10px;
      padding: 10px 20px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <!-- ğŸ”· ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ -->
  <div id="startScreen">
    <h1>ãƒ‘ã‚ªã¨ã˜ã‚ƒã‚“ã‘ã‚“ã™ã‚‹ï¾Šï¾Ÿï½µ</h1>
    <img src="start_pao.png" alt="ã‚¹ã‚¿ãƒ¼ãƒˆç”»åƒ" />
    <br />
    <button onclick="startGame()">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
  </div>

  <!-- ğŸ”¶ ã˜ã‚ƒã‚“ã‘ã‚“ç”»é¢ -->
  <div id="gameScreen" class="hidden">
    <h1>ã˜ã‚ƒãƒ¼ã‚“ã‘ãƒ¼ã‚“â€¦</h1>
    <div>
      <button id="btn-rock" onclick="play('ã‚°ãƒ¼')">âœŠ ã‚°ãƒ¼</button>
      <button id="btn-scissors" onclick="play('ãƒãƒ§ã‚­')">âœŒï¸ ãƒãƒ§ã‚­</button>
      <button id="btn-paper" onclick="play('ãƒ‘ãƒ¼')">ğŸ– ãƒ‘ãƒ¼</button>
    </div>
    <h2 id="result">ï¾Šï¾Ÿï½µãŒå‹ã¤ï¾Šï¾Ÿï½µ</h2>
    <img id="resultImage" src="paojan.gif" alt="ãƒ‘ã‚ªã®æ‰‹" />

    <!-- ğŸ” ã‚‚ã†ä¸€å›ãƒœã‚¿ãƒ³ -->
    <div>
      <button id="retryButton" class="hidden" onclick="resetButtons()">ã‚‚ã†ä¸€å›ï¼</button>
    </div>
  </div>

  <script>
    function startGame() {
      document.getElementById("startScreen").classList.add("hidden");
      document.getElementById("gameScreen").classList.remove("hidden");
      resetButtons(); // åˆæœŸåŒ–
    }

    function play(playerChoice) {
      const choices = ['ã‚°ãƒ¼', 'ãƒãƒ§ã‚­', 'ãƒ‘ãƒ¼'];
      const computerChoice = choices[Math.floor(Math.random() * 3)];

      // é€šå¸¸ã®å‹æ•—åˆ¤å®š
      let result = '';
      if (playerChoice === computerChoice) {
        result = 'ã‚‚ã£ã‹ã„ï¾Šï¾Ÿï½µ';
      } else if (
        (playerChoice === 'ã‚°ãƒ¼' && computerChoice === 'ãƒãƒ§ã‚­') ||
        (playerChoice === 'ãƒãƒ§ã‚­' && computerChoice === 'ãƒ‘ãƒ¼') ||
        (playerChoice === 'ãƒ‘ãƒ¼' && computerChoice === 'ã‚°ãƒ¼')
      ) {
        result = 'ã¾ã è² ã‘ã¦ãªã„ï¾Šï¾Ÿï½µ';
      } else {
        result = 'ï¾Šï¾Ÿï½µãŒæœ€å¼·ï¾Šï¾Ÿï½µï¼ï¼ï¼';
      }

      // ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã®æ‰‹ã«å¯¾å¿œã™ã‚‹é€šå¸¸ç”»åƒ
      let imgSrc = '';
      if (computerChoice === 'ã‚°ãƒ¼') {
        imgSrc = 'rock_pao.png';
      } else if (computerChoice === 'ãƒãƒ§ã‚­') {
        imgSrc = 'scissors_pao.png';
      } else if (computerChoice === 'ãƒ‘ãƒ¼') {
        imgSrc = 'paper_pao.png';
      }

      // â­ ãƒ¬ã‚¢å‡ºç¾å‡¦ç†ï¼ˆ30%ã®ç¢ºç‡ã§ï¼‰
      if (Math.random() < 0.3) {
        const rareData = [
          { img: 'rare1_paomushi.png', text: 'ï¾Šï¾Ÿï½µï¾‘ï½¼ï¾‹ï¾Ÿï½°ï½½â€¼ï¸' },
          { img: 'rare2_wafers.png', text: 'ã‚¦ã‚¨ãƒã¡ã‚ƒã‚“â€¦â€¦ï¼ï¼Ÿ' },
          { img: 'rare3_vanilla.png', text: 'ãƒãƒ‹ã‚‚ã‚„ã‚‹â€¼ï¸' },
          { img: 'rare4_chocomint.png', text: 'è©±ã™ã“ã¨ã¯ãªã„ï¾ï½®ï¾' }
        ];
        const chosen = rareData[Math.floor(Math.random() * rareData.length)];
        imgSrc = chosen.img;
        result = chosen.text;
      }

      document.getElementById('result').textContent = result;
      document.getElementById('resultImage').src = imgSrc;

      // ãƒœã‚¿ãƒ³æ“ä½œåˆ¶é™ã¨è¦‹ãŸç›®
      const buttons = {
        'ã‚°ãƒ¼': document.getElementById('btn-rock'),
        'ãƒãƒ§ã‚­': document.getElementById('btn-scissors'),
        'ãƒ‘ãƒ¼': document.getElementById('btn-paper')
      };

      for (const [choice, button] of Object.entries(buttons)) {
        button.classList.add('disabled');
        if (choice !== playerChoice) {
          button.classList.add('faded');
        }
      }

      // ã€Œã‚‚ã†ä¸€å›ã€ãƒœã‚¿ãƒ³è¡¨ç¤º
      document.getElementById('retryButton').classList.remove('hidden');
    }

    function resetButtons() {
      const buttonIds = ['btn-rock', 'btn-scissors', 'btn-paper'];
      for (const id of buttonIds) {
        const btn = document.getElementById(id);
        btn.classList.remove('disabled');
        btn.classList.remove('faded');
      }

      document.getElementById('result').textContent = 'ï¾Šï¾Ÿï½µãŒå‹ã¤ï¾Šï¾Ÿï½µ';
      document.getElementById('resultImage').src = 'paojan.gif';

      document.getElementById('retryButton').classList.add('hidden');
    }
  </script>
</body>
</html>
